data = {1: {'average_payoff_neighbours_strat1': -6.5,
     'average_payoff_neighbours_strat2': -1.0,
     'average_payoff_neighbours_strat3': -2.0,
     'match_id': [(1, 0)],
     'match_strategy': 3,
     'new_strategy': 2,
     'participant_location': (0, 0),
     'participant_payoff': -8,
     'strategy': 3,
     'supervisor_number': 1,
     'supervisor_payoff': 16,
     'supervisor_state': 1},
 2: {'average_payoff_neighbours_strat1': -6.5,
     'average_payoff_neighbours_strat2': -3.5,
     'average_payoff_neighbours_strat3': -6.0,
     'match_id': [(1, 1)],
     'match_strategy': 2,
     'new_strategy': 2,
     'participant_location': (0, 1),
     'participant_payoff': -1,
     'strategy': 2,
     'supervisor_number': 1,
     'supervisor_payoff': 4,
     'supervisor_state': 1},
 3: {'average_payoff_neighbours_strat1': 0,
     'average_payoff_neighbours_strat2': -1.8333333333333333,
     'average_payoff_neighbours_strat3': -2.0,
     'match_id': [(0, 0)],
     'match_strategy': 3,
     'new_strategy': 1,
     'participant_location': (1, 0),
     'participant_payoff': -8,
     'strategy': 3,
     'supervisor_number': 1,
     'supervisor_payoff': 16,
     'supervisor_state': 1},
 4: {'average_payoff_neighbours_strat1': 0,
     'average_payoff_neighbours_strat2': -3.5,
     'average_payoff_neighbours_strat3': -5.0,
     'match_id': [(0, 1)],
     'match_strategy': 2,
     'new_strategy': 3,
     'participant_location': (1, 1),
     'participant_payoff': -1,
     'strategy': 2,
     'supervisor_number': 1,
     'supervisor_payoff': 4,
     'supervisor_state': 1},
 5: {'average_payoff_neighbours_strat1': -4.0,
     'average_payoff_neighbours_strat2': -1.0,
     'average_payoff_neighbours_strat3': -5.0,
     'match_id': [(0, 1)],
     'match_strategy': 3,
     'new_strategy': 3,
     'participant_location': (0, 0),
     'participant_payoff': -6.5,
     'strategy': 1,
     'supervisor_number': 2,
     'supervisor_payoff': 4,
     'supervisor_state': 0},
 6: {'average_payoff_neighbours_strat1': -5.25,
     'average_payoff_neighbours_strat2': -1.8333333333333333,
     'average_payoff_neighbours_strat3': -8.0,
     'match_id': [(0, 0)],
     'match_strategy': 1,
     'new_strategy': 1,
     'participant_location': (0, 1),
     'participant_payoff': -2,
     'strategy': 3,
     'supervisor_number': 2,
     'supervisor_payoff': 4,
     'supervisor_state': 0},
 7: {'average_payoff_neighbours_strat1': 0,
     'average_payoff_neighbours_strat2': -1.0,
     'average_payoff_neighbours_strat3': -5.6,
     'match_id': [(1, 1)],
     'match_strategy': 3,
     'new_strategy': 1,
     'participant_location': (1, 0),
     'participant_payoff': -3.5,
     'strategy': 2,
     'supervisor_number': 2,
     'supervisor_payoff': 4,
     'supervisor_state': 0},
 8: {'average_payoff_neighbours_strat1': 0,
     'average_payoff_neighbours_strat2': -2.25,
     'average_payoff_neighbours_strat3': -8.0,
     'match_id': [(1, 0)],
     'match_strategy': 2,
     'new_strategy': 3,
     'participant_location': (1, 1),
     'participant_payoff': -2,
     'strategy': 3,
     'supervisor_number': 2,
     'supervisor_payoff': 4,
     'supervisor_state': 0},
 9: {'average_payoff_neighbours_strat1': -4.833333333333333,
     'average_payoff_neighbours_strat2': -1.0,
     'average_payoff_neighbours_strat3': -2.0,
     'match_id': [(0, 1)],
     'match_strategy': 2,
     'new_strategy': 3,
     'participant_location': (0, 0),
     'participant_payoff': -4,
     'strategy': 1,
     'supervisor_number': 3,
     'supervisor_payoff': 4,
     'supervisor_state': 1},
 10: {'average_payoff_neighbours_strat1': -4.5,
      'average_payoff_neighbours_strat2': -3.5,
      'average_payoff_neighbours_strat3': -5.0,
      'match_id': [(0, 0)],
      'match_strategy': 1,
      'new_strategy': 2,
      'participant_location': (0, 1),
      'participant_payoff': -1,
      'strategy': 2,
      'supervisor_number': 3,
      'supervisor_payoff': 4,
      'supervisor_state': 1},
 11: {'average_payoff_neighbours_strat1': -4.0,
      'average_payoff_neighbours_strat2': -1.8333333333333333,
      'average_payoff_neighbours_strat3': -4.0,
      'match_id': [(1, 1)],
      'match_strategy': 3,
      'new_strategy': 3,
      'participant_location': (1, 0),
      'participant_payoff': -8,
      'strategy': 3,
      'supervisor_number': 3,
      'supervisor_payoff': 16,
      'supervisor_state': 1},
 12: {'average_payoff_neighbours_strat1': -4.0,
      'average_payoff_neighbours_strat2': -2.25,
      'average_payoff_neighbours_strat3': -5.0,
      'match_id': [(1, 0)],
      'match_strategy': 3,
      'new_strategy': 3,
      'participant_location': (1, 1),
      'participant_payoff': -8,
      'strategy': 3,
      'supervisor_number': 3,
      'supervisor_payoff': 16,
      'supervisor_state': 1},
 13: {'average_payoff_neighbours_strat1': -4.0,
      'average_payoff_neighbours_strat2': -1.0,
      'average_payoff_neighbours_strat3': 0,
      'match_id': [(0, 1)],
      'match_strategy': 1,
      'new_strategy': 2,
      'participant_location': (0, 0),
      'participant_payoff': -4,
      'strategy': 1,
      'supervisor_number': 4,
      'supervisor_payoff': 4,
      'supervisor_state': 0},
 14: {'average_payoff_neighbours_strat1': -4.0,
      'average_payoff_neighbours_strat2': -1.0,
      'average_payoff_neighbours_strat3': -8.0,
      'match_id': [(0, 0)],
      'match_strategy': 1,
      'new_strategy': 1,
      'participant_location': (0, 1),
      'participant_payoff': -4,
      'strategy': 1,
      'supervisor_number': 4,
      'supervisor_payoff': 4,
      'supervisor_state': 0},
 15: {'average_payoff_neighbours_strat1': -4.0,
      'average_payoff_neighbours_strat2': -1.0,
      'average_payoff_neighbours_strat3': -8.0,
      'match_id': [(1, 1)],
      'match_strategy': 2,
      'new_strategy': 1,
      'participant_location': (1, 0),
      'participant_payoff': -4,
      'strategy': 1,
      'supervisor_number': 4,
      'supervisor_payoff': 4,
      'supervisor_state': 0},
 16: {'average_payoff_neighbours_strat1': -4.0,
      'average_payoff_neighbours_strat2': 0,
      'average_payoff_neighbours_strat3': -8.0,
      'match_id': [(1, 0)],
      'match_strategy': 1,
      'new_strategy': 2,
      'participant_location': (1, 1),
      'participant_payoff': -1,
      'strategy': 2,
      'supervisor_number': 4,
      'supervisor_payoff': 4,
      'supervisor_state': 0}}


#M = 4 

def calculate_total_payoff(data):
    supervisor_payoffs = {}
    
    for key, value in data.items():
        supervisor_number = value['supervisor_number']
        supervisor_payoff = value['supervisor_payoff']
        
        if supervisor_number not in supervisor_payoffs:
            supervisor_payoffs[supervisor_number] = {
                'supervisor_strategy': value['supervisor_state'],
                'total_payoff_supervisor': supervisor_payoff
            }
        else:
            supervisor_payoffs[supervisor_number]['total_payoff_supervisor'] += supervisor_payoff
    
    return supervisor_payoffs


import pprint
# Example usage:
total_payoffs = calculate_total_payoff(data)
#pprint.pprint(total_payoffs)

import math

def create_number_grid(M):
    if math.sqrt(M) % 1 != 0:
        return "Invalid input: M must be a perfect square."

    grid = [[0] * int(math.sqrt(M)) for _ in range(int(math.sqrt(M)))]
    num = 1

    for i in range(int(math.sqrt(M))):
        for j in range(int(math.sqrt(M))):
            grid[i][j] = num
            num += 1

    return grid



def get_neighbors_dict(data):

    # Function to get neighbors of a value in the list
    def get_neighbors(data, row, col):
        neighbors = []
        for r in range(max(0, row - 1), min(row + 2, len(data))):
            for c in range(max(0, col - 1), min(col + 2, len(data[0]))):
                if (r, c) != (row, col):
                    neighbors.append(data[r][c])
        return neighbors

    # Dictionary to store neighbors
    neighbor_dict = {}

    # Loop through the list and store neighbors in the dictionary
    for i, sublist in enumerate(data):
        for j, value in enumerate(sublist):
            neighbor_dict[value] = get_neighbors(data, i, j)

    return neighbor_dict

#print(get_neighbors_dict(data))

# def print_number_grid(grid):
#     for row in grid:
#         print(", ".join(map(str, row)))

M = 4
  # Change M to the desired size of the grid
grid = create_number_grid(M)
#print(grid)

result = get_neighbors_dict(grid)

import pprint
#pprint.pprint(result)